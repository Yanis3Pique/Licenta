@model Licenta_v1.Models.ApplicationUser
@{
    ViewBag.Title = "User Details";
}

<div class="container mt-5">
    <h2 class="text-center">@ViewBag.Title</h2>
    <hr />

    <div class="row">
        <div class="col-md-4 text-center">
            <img src="@(Url.Content("~/" + (Model.PhotoPath ?? "Images/Default.jpg")))"
                 class="card-img-top img-fluid"
                 alt="User Photo"
                 style="height: auto; max-height: 300px; object-fit: cover;">
        </div>

        <div class="col-md-8">
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <th>User Name</th>
                        <td>@Html.DisplayFor(model => model.UserName)</td>
                    </tr>
                    <tr>
                        <th>First Name</th>
                        <td>@Html.DisplayFor(model => model.FirstName)</td>
                    </tr>
                    <tr>
                        <th>Last Name</th>
                        <td>@Html.DisplayFor(model => model.LastName)</td>
                    </tr>
                    <tr>
                        <th>Email</th>
                        <td>@Html.DisplayFor(model => model.Email)</td>
                    </tr>
                    <tr>
                        <th>Phone Number</th>
                        <td>@Html.DisplayFor(model => model.PhoneNumber)</td>
                    </tr>
                    <tr>
                        <th>Region</th>
                        <td>@(Model.Region?.County ?? "N/A")</td>
                    </tr>
                    <tr>
                        <th>Date Hired</th>
                        <td>@(Model.DateHired)</td>
                    </tr>
                    <tr>
                        <th>Average Rating</th>
						@{
                            if (Model.AverageRating.HasValue)
						    {
							    <td>@Model.AverageRating.Value.ToString("0.00")</td>
						    }
						    else
						    {
							    <td>N/A</td>
						    }
                        }                        
                    </tr>
                    <tr>
                        <th>Dismissal Proposal Date</th>
                        <td>@(Model.DismissalNoticeDate.HasValue ? Model.DismissalNoticeDate.Value.ToString("dd/MM/yyyy") : "N/A")</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4">
        <div class="d-flex justify-content-center">
            <a href="@Url.Action("Edit", "Users", new { id = Model.Id })" class="btn btn-warning flex-grow-1 mx-2">
                Edit
            </a>
            <a href="@Url.Action("EmitDismissalProposal", "Users", new { id = Model.Id })" class="btn btn-outline-danger flex-grow-1 mx-2">
				Emit Dismissal Proposal
            </a>
            @using (Html.BeginForm("Delete", "Users", new { id = Model.Id }, FormMethod.Post, false, new { onsubmit = "return confirm('Doriti sa stergeti acest utilizator?');" }))
            {
                <button type="submit" class="btn btn-danger flex-grow-1 mx-2">
                    Delete
                </button>
            }
            <a href="@Url.Action("Index", "Users")" class="btn btn-secondary flex-grow-1 mx-2">
                Back to List
            </a>
        </div>
    </div>
</div>
